(this["webpackJsonpwhere-is-my-books-app"]=this["webpackJsonpwhere-is-my-books-app"]||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},39:function(e,t,n){},51:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(21),a=n.n(c),o=n(2),s=n(17),i=n(7),l=(n(51),n(0)),j=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"navbar-position",children:[Object(l.jsx)(s.b,{className:"titulo-nav",to:"/",children:"  libros  "}),Object(l.jsx)(s.b,{className:"titulo-nav",to:"/persona",children:"  personas  "}),Object(l.jsx)(s.b,{className:"titulo-nav",to:"/genero",children:"  generos  "})]}),Object(l.jsx)("div",{className:"navbar-responsive"})]})},b=n(3),u=n(4),d=n.n(u),p=n(9),O="[libro] Cargar Libros",h="[libro] Agregar Libro",x="[libro] Prestar Libro",f="[libro] Devolver Libro",m="[libro] Borrar Libro",v="[libro] Actualizar Libro",g="[libro] Filtrar libros",y="[genero] Cargar Generos",N="[genero] Agregar Genero",C="[genero] Borrar Genero",w="[persona] Cargar personas",_="[persona] Agregar persona",k="[persona] Borrar persona",S="[persona] Actualizar persona",A="[ui] Montar modal",E="[ui] Montar modal libros prestados",L="[ui] Desmontar modal",I="[ui] Terminar busqueda",B=n(10),D=n.n(B),q="https://node-tp-integrador-server.herokuapp.com",T=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("".concat(q,"/categoria"));case 2:n=e.sent,r=n.status,c=n.data,200===r?t(P(c.categorias)):console.log("Error: ".concat(c.mensaje," Status: ").concat(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(e){return{type:y,payload:e}},F=function(e){return{type:C,payload:e}},z=function(e){return{type:N,payload:e}},G=n(6),H=function(e){return{type:A,payload:{id:e}}},M=function(){return{type:L}},R=function(){return{type:I}},Z=n(22),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(G.a)(t,2),c=n[0],a=n[1],o=function(){a(e)},s=function(e){var t=e.target;a(Object(b.a)(Object(b.a)({},c),{},Object(Z.a)({},t.name,t.value)))};return[c,s,o]},U=(n(27),{nombre:""}),X=function(){var e=Object(o.b)(),t=J(U),n=Object(G.a)(t,3),r=n[0],c=n[1],a=n[2],s=r.nombre;return Object(l.jsx)("div",{className:"formGenero",children:Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),console.log("Abriendo modal"),e(function(e){return function(){var t=Object(p.a)(d.a.mark((function t(n){var r,c,a,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={nombre:e},t.next=3,D.a.post("".concat(q,"/categoria"),r);case 3:c=t.sent,a=c.status,o=c.data,200===a?n(z(o.categoria)):console.log("Error: ".concat(o.mensaje," Status: ").concat(a));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(s)),a(),e(M())},children:[Object(l.jsxs)("label",{htmlFor:"nombre",children:["Agregar un nuevo g\xe9nero",Object(l.jsx)("span",{children:"*"})]}),Object(l.jsx)("table",{children:Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("input",{type:"text",name:"nombre",onChange:c,value:s,placeholder:"Ingresar un nuevo genero",autoComplete:"off",required:!0})}),Object(l.jsx)("td",{children:Object(l.jsxs)("button",{type:"submit",children:[" ",Object(l.jsx)("ion-icon",{name:"add-circle"})," "]})})]})})}),Object(l.jsxs)("p",{className:"aviso",children:[Object(l.jsx)("span",{children:" * "}),"Campos obligatorios."]})]})})},V=function(e){var t=e.nombre,n=e._id,r=Object(o.b)();return Object(l.jsx)("div",{className:"cardGenero",children:Object(l.jsx)("table",{children:Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("label",{htmlFor:"nombre",children:t})}),Object(l.jsx)("td",{children:Object(l.jsx)("button",{onClick:function(){r(function(e){return function(){var t=Object(p.a)(d.a.mark((function t(n){var r,c,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.a.delete("".concat(q,"/categoria/").concat(e));case 2:r=t.sent,c=r.status,a=r.data,200===c?n(F(e)):console.log("Error: ".concat(a.mensaje," Status: ").concat(c));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(n))},children:Object(l.jsx)("ion-icon",{name:"trash"})})})]})})})})},K=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.genero})).generos;return Object(r.useEffect)((function(){e(T())}),[e]),Object(l.jsxs)("div",{className:"estiloGenero",children:[Object(l.jsx)("h1",{children:"P\xe1gina de G\xe9neros"}),Object(l.jsx)(X,{}),Object(l.jsx)("h2",{children:"Lista de g\xe9neros existentes"}),null===t||void 0===t?void 0:t.map((function(e){return Object(l.jsx)(V,Object(b.a)({},e),e._id)}))]})},Q="https://node-tp-integrador-server.herokuapp.com",W=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("".concat(Q,"/libro"));case 2:n=e.sent,r=n.status,c=n.data,200===r?t(Y(c.libros)):console.log("Error: ".concat(c.mensaje," Status: ").concat(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Y=function(e){return{type:O,payload:e}},$=function(e){return{type:m,payload:e}},ee=function(e){return{type:f,payload:e}},te=function(e,t){return{type:x,payload:{id:e,persona_id:t}}},ne=function(e){return{type:h,payload:e}},re=function(e,t){return{type:v,payload:{id:e,libro:t}}},ce=function(e){return{type:g,payload:e}},ae="https://node-tp-integrador-server.herokuapp.com",oe=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("".concat(ae,"/persona"));case 3:n=e.sent,r=n.data,t(se(r.personas)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},se=function(e){return{type:w,payload:e}},ie=function(e){return{type:k,payload:e}},le=function(e){return{type:_,payload:e}},je=function(e,t){return{type:S,payload:{id:e,persona:t}}},be=function(){var e=Object(r.useState)(""),t=Object(G.a)(e,2),n=t[0],c=t[1],a=Object(o.b)(),s=Object(o.c)((function(e){return e.genero})).generos,i=Object(o.c)((function(e){return e.libro})).libros,j=function(e){c(e.target.value)},b=function(){var e=i.filter((function(e){return e.categoria_id===n}));a(ce(e)),a(R())};return Object(l.jsxs)("div",{className:"search-genero",children:[Object(l.jsxs)("select",{className:"generoSelect",value:n,onChange:j,children:[Object(l.jsx)("option",{hidden:!0,children:" Seleccione un genero "}),s.map((function(e){return Object(l.jsx)("option",{value:e._id,onSelect:j,children:e.nombre},e._id)}))]}),Object(l.jsx)("button",{className:"buscar-boton",onClick:b,children:"Buscar"}),Object(l.jsx)("button",{id:"buscar-lupa",onClick:b,children:Object(l.jsx)("ion-icon",{name:"search"})})]})},ue=(n(39),{nombre:"",descripcion:"",categoria:"",persona:""}),de=function(){var e=Object(o.b)(),t=J(ue),n=Object(G.a)(t,3),c=n[0],a=n[1],s=n[2],i=c.nombre,j=c.descripcion,b=Object(o.c)((function(e){return e.genero})).generos,u=Object(r.useState)(""),O=Object(G.a)(u,2),h=O[0],x=O[1];return Object(l.jsxs)("form",{id:"form",onSubmit:function(t){t.preventDefault(),e(function(e,t,n){return function(){var r=Object(p.a)(d.a.mark((function r(c){var a,o,s,i;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={nombre:e,descripcion:t,categoria_id:n},r.next=3,D.a.post("".concat(Q,"/libro"),a);case 3:o=r.sent,s=o.status,i=o.data,200===s?c(ne(i.libro)):console.log("Error: ".concat(i.mensaje," Status: ").concat(s));case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(i,j,h)),s(),e(M())},children:[Object(l.jsx)("h2",{children:"Agregar libro"}),Object(l.jsx)("p",{children:"Ingresar datos de un libro"}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("label",{children:"Nombre"}),Object(l.jsx)("span",{children:" *"})]}),Object(l.jsx)("input",{type:"text",name:"nombre",onChange:a,value:i,placeholder:"Ingresar nombre",autoComplete:"off",required:!0}),Object(l.jsx)("div",{id:"form-label",children:Object(l.jsx)("label",{children:"Descripcion"})}),Object(l.jsx)("input",{type:"text",name:"descripcion",onChange:a,value:j,placeholder:"Ingresar descripcion",autoComplete:"off"}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("label",{children:"Genero"}),Object(l.jsx)("span",{children:" *"})]}),Object(l.jsxs)("select",{value:h,onChange:function(e){x(e.target.value)},required:!0,children:[Object(l.jsx)("option",{hidden:!0,value:"",children:" Seleccione un genero "}),b.map((function(e){return Object(l.jsx)("option",{value:e._id,children:e.nombre},e._id)}))]}),Object(l.jsx)("button",{id:"boton-form",children:"Hecho"}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("span",{children:"* "}),Object(l.jsx)("label",{children:"Los campos son obligatorios"})]})]})},pe=function(e){var t=e.id,n=Object(o.b)(),r=J({descripcion:"",nombre:""}),c=Object(G.a)(r,3),a=c[0],s=c[1],i=c[2],j=a.descripcion,b=a.nombre;return Object(l.jsx)("div",{children:Object(l.jsxs)("form",{id:"form",onSubmit:function(e){e.preventDefault(),n(function(e,t,n){return function(){var r=Object(p.a)(d.a.mark((function r(c){var a,o,s,i;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={nombre:t,descripcion:n},r.next=3,D.a.put("".concat(Q,"/libro/").concat(e),a);case 3:o=r.sent,s=o.status,i=o.data,200===s?c(re(e,i.libro)):console.log("Error: ".concat(i.mensaje," Status: ").concat(s));case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(t,b,j)),i(),n(M())},children:[Object(l.jsx)("h2",{children:"Actualizar libro"}),Object(l.jsx)("p",{children:"Ingresar datos a actualizar"}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("label",{children:"Nombre"}),Object(l.jsx)("span",{children:" *"})]}),Object(l.jsx)("input",{type:"text",name:"nombre",onChange:s,value:b,placeholder:"Ingresar nombre",autoComplete:"off",required:!0}),Object(l.jsx)("label",{id:"form-label",children:"Descripcion"}),Object(l.jsx)("input",{type:"text",name:"descripcion",onChange:s,value:j,placeholder:"Ingresar descripcion",autoComplete:"off"}),Object(l.jsx)("button",{id:"boton-form",children:"Hecho"}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("span",{children:"* "}),Object(l.jsx)("label",{children:"Los campos son obligatorios"})]})]})})},Oe=n(24),he=(n(76),["component"]),xe=function(e){var t=e.component,n=Object(Oe.a)(e,he),r=Object(o.b)();return Object(l.jsx)("div",{children:Object(l.jsx)("div",{id:"modal",children:Object(l.jsxs)("div",{id:"modal-contenido",children:[Object(l.jsx)("div",{id:"modal-close",children:Object(l.jsx)("button",{onClick:function(){r(M())},children:Object(l.jsx)("ion-icon",{name:"close-circle-outline"})})}),Object(l.jsx)(t,Object(b.a)({},n))]})})})},fe=function(e){var t=e.uid,n=Object(o.c)((function(e){return e.persona})).personas,c=Object(o.b)(),a=Object(r.useState)(""),s=Object(G.a)(a,2),i=s[0],j=s[1],b=function(e){j(e.target.value)};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("td",{className:"prestarLibro",children:[Object(l.jsxs)("select",{value:i,onChange:b,children:[Object(l.jsx)("option",{hidden:!0,children:"Prestar"}),n.map((function(e){return Object(l.jsx)("option",{value:e._id,onSelect:b,children:e.nombre},e._id)}))]}),Object(l.jsx)("button",{className:"bottonLibro",id:"boton-prestar",onClick:function(){var e,n;c((e=t,n=i,function(){var t=Object(p.a)(d.a.mark((function t(r){var c,a,o,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={persona_id:n},t.next=3,D.a.put("".concat(Q,"/libro/prestar/").concat(e),c);case 3:a=t.sent,o=a.status,s=a.data,200===o?r(te(e,n)):console.log("Error: ".concat(s.mensaje," Status: ").concat(o));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},children:"confirmar"})]}),Object(l.jsx)("td",{children:Object(l.jsxs)("button",{onClick:function(){var e;c((e=t,function(){var t=Object(p.a)(d.a.mark((function t(n){var r,c,a,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={id:e},t.next=3,D.a.put("".concat(Q,"/libro/devolver/").concat(e),r);case 3:c=t.sent,a=c.status,o=c.data,200===a?n(ee(e)):console.log("Error: ".concat(o.mensaje," Status: ").concat(a));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},className:"bottonLibro",children:[Object(l.jsxs)("span",{className:"tooltip",children:["-",Object(l.jsx)("span",{className:"tooltiptext",children:"Devolver"})]}),Object(l.jsx)("ion-icon",{name:"arrow-undo"}),Object(l.jsxs)("span",{className:"tooltip",children:["-",Object(l.jsx)("span",{className:"tooltiptext",children:"Devolver"})]})]})})]})},me=function(e){var t=e.id,n=Object(o.b)(),c=Object(o.c)((function(e){return e.persona})).personas,a=Object(o.c)((function(e){return e.libro})).libros,s=Object(o.c)((function(e){return e.ui})),i=s.modalOpen,j=s.id,b=Object(r.useState)({}),u=Object(G.a)(b,2),O=u[0],h=u[1],x=O.nombre,f=O.descripcion,m=O.persona_id,v=Object(r.useState)({}),g=Object(G.a)(v,2),y=g[0],N=g[1];Object(r.useEffect)((function(){var e=a.find((function(e){return e._id===t}));h(e)}),[t,a]),Object(r.useEffect)((function(){var e=c.find((function(e){return e._id===m}));N(e)}),[m,c]);return Object(l.jsxs)("tr",{className:"libro-card",children:[Object(l.jsx)("td",{children:Object(l.jsx)("p",{children:x})}),Object(l.jsx)("td",{children:Object(l.jsx)("p",{children:f})}),Object(l.jsx)("td",{children:Object(l.jsx)("p",{children:y?"".concat(y.nombre):"No est\xe1 prestado"})}),Object(l.jsx)(fe,{uid:t}),Object(l.jsx)("td",{children:Object(l.jsxs)("button",{className:"bottonLibro",onClick:function(){n(function(e){return function(){var t=Object(p.a)(d.a.mark((function t(n){var r,c,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.a.delete("".concat(Q,"/libro/").concat(e));case 2:r=t.sent,c=r.status,a=r.data,200===c?n($(e)):console.log("Error: ".concat(a.mensaje," Status: ").concat(c));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},children:[Object(l.jsxs)("span",{className:"tooltip",children:["-",Object(l.jsx)("span",{className:"tooltiptext",children:"Borrar"})]}),Object(l.jsx)("ion-icon",{name:"trash"}),Object(l.jsxs)("span",{className:"tooltip",children:["-",Object(l.jsx)("span",{className:"tooltiptext",children:"Borrar"})]})]})}),Object(l.jsxs)("td",{children:[Object(l.jsxs)("button",{className:"bottonLibro",onClick:function(){n(H(t))},children:[Object(l.jsxs)("span",{className:"tooltip",children:["-",Object(l.jsx)("span",{className:"tooltiptext",children:"Refrescar"})]}),Object(l.jsx)("ion-icon",{name:"refresh-circle"}),Object(l.jsxs)("span",{className:"tooltip",children:["-",Object(l.jsx)("span",{className:"tooltiptext",children:"Refrescar"})]})]}),i&&t===j&&Object(l.jsx)(xe,{component:pe,id:t})]})]})},ve=function(){var e=J({searchText:""}),t=Object(G.a)(e,2),n=t[0],r=t[1],c=Object(o.b)(),a=Object(o.c)((function(e){return e.libro})).libros,s=n.searchText;return Object(l.jsxs)("form",{className:"search-libro",onSubmit:function(e){if(e.preventDefault(),s.length>0){var t=s.toUpperCase(),n=a.filter((function(e){return e.nombre.includes(t)}));c(ce(n)),c(R())}},children:[Object(l.jsx)("input",{type:"text",placeholder:"Buscar libro por nombre",name:"searchText",autoComplete:"off",value:s,onChange:r,className:"campoBuscar"}),Object(l.jsx)("button",{className:"buscar-boton",type:"submit",children:"Buscar..."}),Object(l.jsx)("button",{type:"submit",id:"buscar-lupa",children:Object(l.jsx)("ion-icon",{name:"search"})})]})},ge=(n(77),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.ui})),n=t.modalOpen,c=t.id,a=Object(o.c)((function(e){return e.ui})).filtered,s=Object(o.c)((function(e){return e.libro})).librosFiltrados,i=Object(o.c)((function(e){return e.libro})).libros;Object(r.useEffect)((function(){e(W()),e(oe()),e(T())}),[e]);return Object(l.jsxs)("div",{className:"estiloLibro",children:[n&&!c&&Object(l.jsx)(xe,{component:de,modalOpen:n}),Object(l.jsxs)("div",{className:"buscadores",children:[Object(l.jsxs)("div",{className:"agregar-libro",children:[Object(l.jsx)("button",{onClick:function(){e(H())},children:Object(l.jsx)("ion-icon",{name:"add-circle"})}),Object(l.jsx)("p",{children:"Agregar"})]}),Object(l.jsx)(ve,{}),Object(l.jsx)(be,{})]}),Object(l.jsx)("table",{children:Object(l.jsxs)("tbody",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Nombre"}),Object(l.jsx)("th",{children:"Descripcion"}),Object(l.jsx)("th",{children:"Prestado A"}),Object(l.jsx)("th",{colSpan:"4",children:"Acciones"})]}),!a&&(null===i||void 0===i?void 0:i.map((function(e){return Object(l.jsx)(me,{id:e._id},e._id)}))),!a&&0===i.length&&Object(l.jsx)("span",{children:"Cargando"}),a&&(null===s||void 0===s?void 0:s.map((function(e){return Object(l.jsx)(me,{id:e._id},e._id)}))),a&&0===s.length&&Object(l.jsx)("span",{children:"No se encuentra busqueda"})]})})]})}),ye=(n(28),function(){var e=Object(o.b)(),t=J({name:"",surname:"",userTag:"",email:""}),n=Object(G.a)(t,3),r=n[0],c=n[1],a=n[2],s=r.name,i=r.surname,j=r.userTag,b=r.email;return Object(l.jsxs)("form",{id:"form",onSubmit:function(t){t.preventDefault(),e(function(e,t,n,r){return function(){var c=Object(p.a)(d.a.mark((function c(a){var o,s,i;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return o={nombre:e,apellido:t,alias:n,email:r},c.prev=1,c.next=4,D.a.post("".concat(ae,"/persona"),o);case 4:s=c.sent,i=s.data,a(le(i.persona)),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),console.log(c.t0);case 12:case"end":return c.stop()}}),c,null,[[1,9]])})));return function(e){return c.apply(this,arguments)}}()}(s,i,j,b)),a(),e(M())},children:[Object(l.jsx)("h2",{children:"Agregar persona"}),Object(l.jsx)("p",{children:"Ingresar datos de una persona"}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("label",{children:"Nombre"}),Object(l.jsx)("span",{children:" *"})]}),Object(l.jsx)("input",{type:"text",name:"name",onChange:c,value:s,placeholder:"Ingresar nombre",autoComplete:"off",required:!0,pattern:"[A-Za-z]{1,15}"}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("label",{children:"Apellido"}),Object(l.jsx)("span",{children:" *"})]}),Object(l.jsx)("input",{type:"text",name:"surname",onChange:c,value:i,placeholder:"Ingresar apellido",autoComplete:"off",required:!0,pattern:"[A-Za-z]{1,15}"}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("label",{children:"Alias"}),Object(l.jsx)("span",{children:" *"})]}),Object(l.jsx)("input",{type:"text",name:"userTag",onChange:c,value:j,placeholder:"Ingresar alias",autoComplete:"off",required:!0,pattern:"[A-Za-z0-9_-]{1,15}"}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("label",{children:"Email"}),Object(l.jsx)("span",{children:" *"})]}),Object(l.jsx)("input",{type:"email",name:"email",onChange:c,value:b,placeholder:"Ingresar email",autoComplete:"off",required:!0}),Object(l.jsx)("button",{id:"boton-form",children:"Hecho"}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("span",{children:"* "}),Object(l.jsx)("label",{children:"Los campos son obligatorios"})]})]})}),Ne=function(e){var t=e.id,n=Object(o.b)(),r=J({name:"",surname:"",userTag:""}),c=Object(G.a)(r,3),a=c[0],s=c[1],i=c[2],j=a.name,b=a.surname,u=a.userTag;return Object(l.jsxs)("form",{id:"form",onSubmit:function(e){e.preventDefault(),n(function(e,t,n,r){return function(){var c=Object(p.a)(d.a.mark((function c(a){var o,s,i;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return o={nombre:t,apellido:n,alias:r},c.prev=1,c.next=4,D.a.put("".concat(ae,"/persona/").concat(e),o);case 4:s=c.sent,i=s.data,a(je(e,i.persona)),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),console.log(c.t0);case 12:case"end":return c.stop()}}),c,null,[[1,9]])})));return function(e){return c.apply(this,arguments)}}()}(t,j,b,u)),i(),n(M())},children:[Object(l.jsx)("h2",{children:"Actualizar persona"}),Object(l.jsx)("p",{children:"Ingresar datos a actualizar"}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("label",{children:"Nombre"}),Object(l.jsx)("span",{children:" *"})]}),Object(l.jsx)("input",{type:"text",name:"name",onChange:s,value:j,placeholder:"Ingresar nombre",autoComplete:"off",required:!0}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("label",{children:"Apellido"}),Object(l.jsx)("span",{children:" *"})]}),Object(l.jsx)("input",{type:"text",name:"surname",onChange:s,value:b,placeholder:"Ingresar apellido",autoComplete:"off",required:!0}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("label",{children:"Alias"}),Object(l.jsx)("span",{children:" *"})]}),Object(l.jsx)("input",{type:"text",name:"userTag",onChange:s,value:u,placeholder:"Ingresar alias",autoComplete:"off",required:!0}),Object(l.jsx)("button",{id:"boton-form",children:"Hecho"}),Object(l.jsxs)("div",{id:"form-label",children:[Object(l.jsx)("span",{children:"* "}),Object(l.jsx)("label",{children:"Los campos son obligatorios"})]})]})},Ce=function(e){var t=e.id,n=Object(o.c)((function(e){return e.libro})).libros,c=Object(r.useState)([]),a=Object(G.a)(c,2),s=a[0],i=a[1],j=Object(o.b)(),b=Object(r.useState)(!1),u=Object(G.a)(b,2),d=u[0],p=u[1];return Object(r.useEffect)((function(){var e=n.filter((function(e){return e.persona_id===t}));i(e),0===s.length?p(!1):p(!0)}),[j,t,n,s.length]),Object(l.jsx)("div",{className:"estiloLibro libro-page",children:d?null===s||void 0===s?void 0:s.map((function(e){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h2",{children:"Libros prestados"}),Object(l.jsx)("br",{}),Object(l.jsx)("tbody",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Nombre"}),Object(l.jsx)("th",{children:"Descripcion"}),Object(l.jsx)("th",{children:"Prestado A"}),Object(l.jsx)("th",{colSpan:"4",children:"Acciones"})]})}),Object(l.jsx)(me,{id:e._id},e._id)]})})):Object(l.jsx)("h2",{children:"No hay libros prestados a esta persona"})})},we=(n(78),["component"]),_e=function(e){var t=e.component,n=Object(Oe.a)(e,we),r=Object(o.b)();return Object(l.jsx)("div",{children:Object(l.jsx)("div",{id:"modal-libros",children:Object(l.jsxs)("div",{className:"modal-libros-contenido",children:[Object(l.jsx)("div",{className:"modal-libros-close",children:Object(l.jsx)("button",{onClick:function(){r(M())},children:Object(l.jsx)("ion-icon",{name:"close-circle-outline"})})}),Object(l.jsx)(t,Object(b.a)({},n))]})})})},ke=function(e){var t=e.nombre,n=e.apellido,r=e.alias,c=e.email,a=e._id,s=Object(o.b)(),i=Object(o.c)((function(e){return e.ui})),j=i.modalOpen,b=i.modalOpenBorrowed,u=i.id;return Object(l.jsxs)("div",{className:"estiloPersona",children:[Object(l.jsxs)("div",{className:"datos",children:[Object(l.jsx)("label",{children:"Nombre: "}),t,Object(l.jsx)("label",{children:"Apellido: "}),n,Object(l.jsx)("label",{children:"Alias: "}),r,Object(l.jsx)("label",{children:"Email: "}),c]}),Object(l.jsxs)("div",{className:"estiloPersonaTr",children:[Object(l.jsxs)("button",{className:"boton-persona-card",onClick:function(){s(function(e){return function(){var t=Object(p.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.delete("".concat(ae,"/persona/").concat(e));case 3:n(ie(e)),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}(a))},children:[" ",Object(l.jsx)("ion-icon",{name:"trash"})]}),Object(l.jsxs)("button",{className:"boton-persona-card",onClick:function(){s(H(a))},children:[" ",Object(l.jsx)("ion-icon",{name:"reload"})]}),j&&a===u&&Object(l.jsx)(xe,{component:Ne,id:a}),Object(l.jsxs)("button",{className:"boton-persona-card",onClick:function(){s(function(e){return{type:E,payload:{id:e}}}(a))},children:[" ",Object(l.jsx)("ion-icon",{name:"enter"})]}),b&&a===u&&Object(l.jsx)(_e,{component:Ce,id:a})]})]})},Se=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.ui})),n=t.modalOpen,c=t.id,a=Object(o.c)((function(e){return e.persona})).personas;Object(r.useEffect)((function(){e(oe()),e(W())}),[e]);return Object(l.jsxs)("div",{className:"estiloFormularioPersona",children:[Object(l.jsx)("h1",{children:"P\xe1gina de Personas"}),Object(l.jsxs)("div",{className:"agregar-personas",children:[Object(l.jsxs)("button",{className:"estiloBotonAgregarPersona",onClick:function(){e(H())},children:[" ",Object(l.jsx)("ion-icon",{name:"add-circle"})]}),n&&!c&&Object(l.jsx)(xe,{component:ye,modalOpen:n}),Object(l.jsx)("p",{children:"Agregar nueva persona"})]}),Object(l.jsx)("h2",{children:"Lista de personas existentes"}),null===a||void 0===a?void 0:a.map((function(e){return Object(l.jsx)(ke,Object(b.a)({},e),e._id)}))]})},Ae=function(){return Object(l.jsxs)(s.a,{children:[Object(l.jsx)("div",{className:"navbar-position",children:Object(l.jsx)(j,{})}),Object(l.jsxs)(i.d,{children:[Object(l.jsx)(i.b,{exact:!0,path:"/",component:ge}),Object(l.jsx)(i.b,{exact:!0,path:"/persona",component:Se}),Object(l.jsx)(i.b,{exact:!0,path:"/genero",component:K}),Object(l.jsx)(i.a,{to:"/"})]})]})},Ee=n(18),Le=n(41),Ie=n(16),Be={generos:[]},De={libros:[],librosFiltrados:[]},qe={personas:[]},Te={modalOpen:!1,modalOpenBorrowed:!1,id:"",filtered:!1},Pe=Object(Ee.b)({libro:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(b.a)(Object(b.a)({},e),{},{libros:t.payload});case m:return Object(b.a)(Object(b.a)({},e),{},{libros:e.libros.filter((function(e){return e._id!==t.payload}))});case f:return Object(b.a)(Object(b.a)({},e),{},{libros:e.libros.map((function(e){return e._id===t.payload&&(e.persona_id=null),e}))});case x:return Object(b.a)(Object(b.a)({},e),{},{libros:e.libros.map((function(e){return e._id===t.payload.id&&(e.persona_id=t.payload.persona_id),e}))});case h:return Object(b.a)(Object(b.a)({},e),{},{libros:[t.payload].concat(Object(Ie.a)(e.libros))});case v:return Object(b.a)(Object(b.a)({},e),{},{libros:e.libros.map((function(e){return e._id===t.payload.id&&(e=t.payload.libro),e}))});case g:return Object(b.a)(Object(b.a)({},e),{},{librosFiltrados:t.payload});default:return e}},persona:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(b.a)(Object(b.a)({},e),{},{personas:t.payload});case k:return Object(b.a)(Object(b.a)({},e),{},{personas:e.personas.filter((function(e){return e._id!==t.payload}))});case _:return Object(b.a)(Object(b.a)({},e),{},{personas:[t.payload].concat(Object(Ie.a)(e.personas))});case S:return Object(b.a)(Object(b.a)({},e),{},{personas:e.personas.map((function(e){return e._id===t.payload.id&&(e=t.payload.persona),e}))});default:return e}},genero:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(b.a)(Object(b.a)({},e),{},{generos:t.payload});case C:return Object(b.a)(Object(b.a)({},e),{},{generos:e.generos.filter((function(e){return e._id!==t.payload}))});case N:return Object(b.a)(Object(b.a)({},e),{},{generos:[t.payload].concat(Object(Ie.a)(e.generos))});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return t.payload?{modalOpen:!0,id:t.payload.id}:{modalOpen:!0};case E:return t.payload?{modalOpenBorrowed:!0,id:t.payload.id}:{modalOpenBorrowed:!0};case L:return{modalOpen:!1,modalOpenBorrowed:!1};case I:return{filtered:!0};default:return e}}}),Fe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ee.c,ze=Object(Ee.d)(Pe,Fe(Object(Ee.a)(Le.a))),Ge=function(){return Object(l.jsx)("div",{children:Object(l.jsx)(o.a,{store:ze,children:Object(l.jsx)(Ae,{})})})};n(79);a.a.render(Object(l.jsx)(Ge,{}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.7d04a83c.chunk.js.map